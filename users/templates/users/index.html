{% extends "users/base.html" %}
{% block title %}نظام الطاقة الشمسية{% endblock title%}
{% block content %}
<div class="container-fluid px-0">
    <!-- قسم الهيرو -->
    <div class="hero-section" style="background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('https://images.unsplash.com/photo-1509391366360-2e959784a276?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80'); background-size: cover; background-position: center; height: 60vh; display: flex; align-items: center;">
        <div class="container text-white text-center py-5">
            <h1 class="display-3 mb-4">نظام الطاقة الشمسية الذكي</h1>
            <p class="lead mb-5" style="font-size: 1.5rem;">الحل المتكامل لإدارة طلبات تركيب الأنظمة الشمسية بكفاءة واحترافية</p>
            <div class="d-flex justify-content-center gap-3">
                {% if user.is_authenticated %}
                    <form action="{% url 'logout' %}" method="post" class="d-inline">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-danger btn-lg px-4 py-3">
                            <i class="fas fa-sign-out-alt ml-2"></i> تسجيل الخروج
                        </button>
                    </form>
                {% else %}
                    <a href="{% url 'login' %}" class="btn btn-primary btn-lg px-4 py-3">
                        <i class="fas fa-sign-in-alt ml-2"></i> تسجيل الدخول
                    </a>
                    <a href="{% url 'users:register' %}" class="btn btn-success btn-lg px-4 py-3">
                        <i class="fas fa-user-plus ml-2"></i> إنشاء حساب
                    </a>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- إحصائيات سريعة -->
    <div class="py-5 bg-light">
        <div class="container">
            <div class="row text-center">
                <div class="col-md-3">
                    <div class="counter-box">
                        <i class="fas fa-users fa-3x text-primary mb-3"></i>
                        <h2 class="counter" data-target="2500">0</h2>
                        <p>عميل مسجل</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="counter-box">
                        <i class="fas fa-solar-panel fa-3x text-success mb-3"></i>
                        <h2 class="counter" data-target="1800">0</h2>
                        <p>نظام شمسي</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="counter-box">
                        <i class="fas fa-user-cog fa-3x text-warning mb-3"></i>
                        <h2 class="counter" data-target="150">0</h2>
                        <p>فني معتمد</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="counter-box">
                        <i class="fas fa-map-marked-alt fa-3x text-info mb-3"></i>
                        <h2 class="counter" data-target="12">0</h2>
                        <p>منطقة تغطية</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- كيف يعمل النظام -->
    <div class="py-5">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6 mb-5 mb-lg-0">
                    <h2 class="display-5 mb-4">كيف يعمل نظامنا؟</h2>
                    <div class="timeline">
                        <div class="timeline-step">
                            <div class="timeline-icon bg-primary">1</div>
                            <div class="timeline-content">
                                <h4>التسجيل في النظام</h4>
                                <p>قم بإنشاء حسابك كعميل أو فني متخصص خلال دقائق</p>
                            </div>
                        </div>
                        <div class="timeline-step">
                            <div class="timeline-icon bg-success">2</div>
                            <div class="timeline-content">
                                <h4>تقديم الطلب</h4>
                                <p>أدخل تفاصيل طلبك (الموقع، المساحة، الاستهلاك)</p>
                            </div>
                        </div>
                        <div class="timeline-step">
                            <div class="timeline-icon bg-warning">3</div>
                            <div class="timeline-content">
                                <h4>دراسة الجدوى</h4>
                                <p>يقوم النظام بحساب التكلفة والعائد المتوقع</p>
                            </div>
                        </div>
                        <div class="timeline-step">
                            <div class="timeline-icon bg-info">4</div>
                            <div class="timeline-content">
                                <h4>تنفيذ المشروع</h4>
                                <p>يتولى الفني المعتمد تركيب النظام وتشغيله</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="card shadow-lg border-0 h-100">
                        <div class="card-body p-4">
                            <img src="https://images.unsplash.com/photo-1508514177221-188b1cf16e9d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="عملية التركيب" class="img-fluid rounded">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- مميزات النظام -->
    <div class="py-5 bg-light">
        <div class="container">
            <h2 class="display-5 text-center mb-5">لماذا تختار نظامنا؟</h2>
            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body text-center p-4">
                            <div class="icon-box bg-primary">
                                <i class="fas fa-bolt fa-2x text-white"></i>
                            </div>
                            <h4 class="my-3">توفير الطاقة</h4>
                            <p>وفر حتى 80% من فاتورة الكهرباء الشهرية باستخدام أنظمتنا الشمسية</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body text-center p-4">
                            <div class="icon-box bg-success">
                                <i class="fas fa-shield-alt fa-2x text-white"></i>
                            </div>
                            <h4 class="my-3">ضمان الجودة</h4>
                            <p>جميع الفنيين معتمدون وذوو خبرة عالية في مجال الطاقة الشمسية</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body text-center p-4">
                            <div class="icon-box bg-warning">
                                <i class="fas fa-headset fa-2x text-white"></i>
                            </div>
                            <h4 class="my-3">دعم فني</h4>
                            <p>خدمة عملاء متاحة 24/7 لحل أي مشكلة تواجهك مع النظام</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- شهادات العملاء -->
    <div class="py-5">
        <div class="container">
            <h2 class="display-5 text-center mb-5">آراء عملائنا</h2>
            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body p-4">
                            <div class="d-flex mb-3">
                                <img src="https://randomuser.me/api/portraits/men/32.jpg" class="rounded-circle me-3" width="60" alt="عميل">
                                <div>
                                    <h5 class="mb-0">أحمد محمد</h5>
                                    <div class="text-warning">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                    </div>
                                </div>
                            </div>
                            <p class="mb-0">"النظام سهل الاستخدام وفريق العمل محترف جداً، وفرت أكثر من 75% من فاتورة الكهرباء بعد تركيب النظام"</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body p-4">
                            <div class="d-flex mb-3">
                                <img src="https://randomuser.me/api/portraits/women/44.jpg" class="rounded-circle me-3" width="60" alt="عميل">
                                <div>
                                    <h5 class="mb-0">سارة عبدالله</h5>
                                    <div class="text-warning">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star-half-alt"></i>
                                    </div>
                                </div>
                            </div>
                            <p class="mb-0">"تجربة رائعة من البداية للنهاية، الفني كان محترفاً وشرح لي كل شيء عن النظام وكيفية صيانته"</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body p-4">
                            <div class="d-flex mb-3">
                                <img src="https://randomuser.me/api/portraits/men/75.jpg" class="rounded-circle me-3" width="60" alt="عميل">
                                <div>
                                    <h5 class="mb-0">خالد سعيد</h5>
                                    <div class="text-warning">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="far fa-star"></i>
                                    </div>
                                </div>
                            </div>
                            <p class="mb-0">"أعجبني نظام المتابعة والتقارير الدورية التي تصلني عن أداء النظام الشمسي"</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- دعوة للعمل -->
    <div class="py-5 bg-primary text-white">
        <div class="container text-center">
            <h2 class="display-5 mb-4">هل أنت مستعد للتحول للطاقة الشمسية؟</h2>
            <p class="lead mb-5">سجل طلبك الآن واحصل على دراسة جدوى مجانية لمشروعك</p>
            {% if user.is_authenticated %}
                <a href="{% url 'solar:create_request' %}" class="btn btn-light btn-lg px-5 py-3">
                    <i class="fas fa-plus-circle ml-2"></i> تقديم طلب جديد
                </a>
            {% else %}
                <a href="{% url 'users:register' %}" class="btn btn-light btn-lg px-5 py-3">
                    <i class="fas fa-user-plus ml-2"></i> إنشاء حساب جديد
                </a>
            {% endif %}
        </div>
    </div>

    <!-- تذييل الصفحة -->
    <footer class="bg-dark text-white py-5">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4 mb-md-0">
                    <h5 class="mb-4">نظام الطاقة الشمسية</h5>
                    <p>الحل الأمثل لتسجيل طلبات تركيب الأنظمة الشمسية وتوصيل العملاء مع الفنيين المتخصصين.</p>
                </div>
                <div class="col-md-4 mb-4 mb-md-0">
                    <h5 class="mb-4">روابط سريعة</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="/" class="text-white">الصفحة الرئيسية</a></li>
                        {% if user.is_authenticated %}
                            <li class="mb-2">
                                <form action="{% url 'logout' %}" method="post" class="d-inline">
                                    {% csrf_token %}
                                    <button type="submit" class="btn btn-link text-white p-0 border-0">تسجيل الخروج</button>
                                </form>
                            </li>
                        {% else %}
                            <li class="mb-2"><a href="{% url 'login' %}" class="text-white">تسجيل الدخول</a></li>
                        {% endif %}
                        <li class="mb-2"><a href="{% url 'users:register' %}" class="text-white">إنشاء حساب</a></li>
                        <li class="mb-2"><a href="#" class="text-white">الأسئلة الشائعة</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h5 class="mb-4">تواصل معنا</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><i class="fas fa-phone ml-2"></i> 966123456789+</li>
                        <li class="mb-2"><i class="fas fa-envelope ml-2"></i> info@solar-system.com</li>
                        <li class="mb-2"><i class="fas fa-map-marker-alt ml-2"></i> الرياض، المملكة العربية السعودية</li>
                    </ul>
                </div>
            </div>
            <hr class="my-4 bg-light">
            <div class="text-center">
                <p class="mb-0">جميع الحقوق محفوظة © نظام الطاقة الشمسية {% now "Y" %}</p>
            </div>
        </div>
    </footer>
</div>

<style>
    body {
        font-family: 'Tajawal', sans-serif;
    }
    .hero-section {
        position: relative;
    }
    .counter-box {
        padding: 20px;
    }
    .counter {
        font-size: 2.5rem;
        font-weight: 700;
        color: #2c3e50;
    }
    .timeline {
        position: relative;
        padding-left: 50px;
    }
    .timeline-step {
        position: relative;
        padding-bottom: 30px;
    }
    .timeline-icon {
        position: absolute;
        left: -50px;
        top: 0;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
    }
    .timeline-content {
        padding: 15px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }
    .icon-box {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 20px;
    }
    .card {
        border-radius: 15px;
        transition: all 0.3s;
    }
    .card:hover {
        transform: translateY(-10px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    .btn {
        border-radius: 10px;
        font-weight: 600;
        transition: all 0.3s;
    }
    .btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    /* أنماط إضافية لتسجيل الخروج */
    .btn-link.text-white {
        background: none;
        border: none;
        padding: 0;
        margin: 0;
        color: white !important;
        text-decoration: none;
    }
    .btn-link.text-white:hover {
        text-decoration: underline;
    }
    form.d-inline {
        display: inline-block;
        margin: 0;
    }
</style>

<script>
    // Animation for counters
    const counters = document.querySelectorAll('.counter');
    const speed = 200;
    
    function animateCounters() {
        counters.forEach(counter => {
            const target = +counter.getAttribute('data-target');
            const count = +counter.innerText;
            const increment = target / speed;
            
            if (count < target) {
                counter.innerText = Math.ceil(count + increment);
                setTimeout(animateCounters, 1);
            } else {
                counter.innerText = target;
            }
        });
    }
    
    // Start animation when scrolled to counters
    window.addEventListener('scroll', function() {
        const counterSection = document.querySelector('.counter-box');
        const position = counterSection.getBoundingClientRect().top;
        const screenPosition = window.innerHeight / 1.3;
        
        if (position < screenPosition) {
            animateCounters();
        }
    });
</script>
{% endblock content %}